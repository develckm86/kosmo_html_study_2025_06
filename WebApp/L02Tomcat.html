<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Apache Tomcat 수업 정리</title>
    <link rel="stylesheet" href="/src/css/study.css">

</head>
<body>
<h1>Apache Tomcat</h1>

<section>
    <h2>1. 개요</h2>
    <ul>
        <li>Apache Tomcat은 Java 기반 웹 애플리케이션을 실행하기 위한 오픈소스 웹 애플리케이션 서버(WAS)</li>
        <li>Servlet과 JSP를 실행할 수 있는 표준 컨테이너</li>
        <li>Apache Software Foundation(ASF)에서 관리하며, 가볍고 범용적으로 사용됨</li>
    </ul>
</section>

<section>
    <h2>2. 아파치 HTTP 서버와 Tomcat의 차이</h2>
    <ul>
        <li><strong>Apache HTTP Server</strong>: 정적 콘텐츠(HTML, CSS, JS, 이미지 등)를 빠르게 처리</li>
        <li><strong>Tomcat</strong>: 동적 콘텐츠(Servlet, JSP 등)을 실행할 수 있는 Java 컨테이너</li>
        <li>두 서버를 함께 사용하여 성능과 확장성을 높일 수 있음 (정적은 Apache, 동적은 Tomcat)</li>
    </ul>
</section>

<section>
    <h2>3. Tomcat의 역사</h2>
    <ul>
        <li>1999년 Sun Microsystems에서 Servlet/JSP의 <strong>레퍼런스 구현</strong>으로 시작</li>
        <li>개발자: James Duncan Davidson</li>
        <li>이후 Apache Software Foundation에 코드 기부 → 오픈소스화</li>
        <li>버전별 발전:
            <ul>
                <li>3.x – 초기 서블릿 컨테이너</li>
                <li>4.x – Catalina, Jasper, Coyote 구조 도입</li>
                <li>7~9.x – Servlet 3.x, WebSocket, 비동기 처리 지원</li>
                <li>10.x – javax.* → jakarta.* 전환 (Eclipse Foundation 이관 이후)</li>
            </ul>
        </li>
        <li>현재는 오라클 인수 후 Eclipse 재단 주도로 Jakarta EE 기반으로 발전 중</li>
    </ul>
</section>

<section>
    <h2>4. Tomcat 내부 구조</h2>
    <ul>
        <li><strong>Catalina</strong>: 서블릿 컨테이너의 핵심 엔진 (요청/응답 관리)</li>
        <li><strong>Coyote</strong>: HTTP, AJP 등 커넥터를 담당</li>
        <li><strong>Jasper</strong>: JSP 파일을 서블릿으로 변환해 실행</li>
        <li><strong>Host / Context</strong>: 가상 호스트 및 애플리케이션 영역 관리</li>
    </ul>
</section>

<section>
    <h2>5. Tomcat의 주요 특징</h2>
    <ul>
        <li><strong>멀티스레드 구조</strong>: 요청마다 스레드로 병렬 처리 (Thread Pool 사용)</li>
        <li><strong>비동기 처리</strong>: Servlet 3.0 이상에서 비동기 요청 처리 지원</li>
        <li><strong>요청 파라미터 자동 매핑</strong>: request.getParameter() 로 손쉽게 접근 가능</li>
        <li><strong>에러 페이지 자동화</strong>: web.xml 설정으로 오류별 페이지 지정 가능</li>
        <li><strong>보안 기능</strong>: SSL/TLS, 접근 제어, 세션 관리 강화</li>
        <li><strong>경량성</strong>: 전체 WAS보다 가볍고 빠른 배포 가능</li>
        <li><strong>보안 기능</strong>: SSL/TLS, 접근 제어, 세션 관리 강화</li>
        <li><strong>JSP 인터프리터 엔진 Jasper</strong>:
            <ul>
                <li>Tomcat 내부에서 JSP 파일을 해석하고, 자바 소스(Servlet 코드)로 변환하는 엔진</li>
                <li>JSP → Java → .class 로 변환하여 실행되며, 최초 요청 시 자동 컴파일</li>
                <li>변환된 서블릿 클래스는 캐시되어 이후에는 빠르게 실행됨</li>
                <li>개발 시 JSP 수정 시 자동 리컴파일 기능을 제공</li>
            </ul>
        </li>

    </ul>
</section>

<section>
    <h2>6. 최신 버전 주요 기능(Tomcat 10~11)</h2>
    <ul>
        <li><strong>Jakarta EE 표준 지원 (javax → jakarta)</strong>
            <ul>
                <li>기존 Java EE가 Oracle에서 Eclipse 재단으로 이관되면서 패키지명이 변경됨</li>
                <li>Servlet, JSP, EL, JSTL 등의 모든 API가 <code>javax.*</code> → <code>jakarta.*</code> 로 변경</li>
                <li>Tomcat 10 이상은 새로운 Jakarta 네임스페이스만 지원</li>
                <li>기존 프로젝트를 옮길 때는 마이그레이션 도구로 패키지명 일괄 변환 필요</li>
            </ul>
        </li>

        <li><strong>HTTP/2 프로토콜 지원</strong>
            <ul>
                <li>HTTP/1.1보다 빠른 통신을 위한 차세대 프로토콜</li>
                <li>하나의 연결(TCP)에서 여러 요청을 동시에 처리할 수 있음 (Multiplexing)</li>
                <li>헤더 압축(HPACK)으로 네트워크 부하 감소</li>
                <li>Tomcat 9 이상부터 지원 (OpenSSL 또는 Java 9 이상 필요)</li>
            </ul>
        </li>

        <li><strong>TLS SNI, OpenSSL 기반 보안 향상</strong>
            <ul>
                <li>TLS SNI(Server Name Indication): 하나의 서버에서 여러 SSL 인증서 사용 가능</li>
                <li>OpenSSL과 연동하여 네이티브 수준의 암호화 성능 향상</li>
                <li>HTTPS 설정 시 각 도메인별 인증서 개별 지정 가능</li>
                <li>Tomcat 커넥터(Connector)에서 JSSE / OpenSSL 둘 다 선택 가능</li>
            </ul>
        </li>

        <li><strong>Non-blocking I/O (NIO2) 및 WebSocket 개선</strong>
            <ul>
                <li>NIO2: 요청마다 스레드를 점유하지 않고 비동기 이벤트 기반으로 처리</li>
                <li>적은 스레드로 더 많은 연결을 동시에 처리 가능 (고성능 서버 구조)</li>
                <li>WebSocket: 서버와 클라이언트 간 실시간 양방향 통신 기능</li>
                <li>Tomcat 8 이상부터 WebSocket 표준 구현, 10 이후 성능 및 안정성 개선</li>
            </ul>
        </li>

        <li><strong>필터·Valve 확장, 요청 제한·IP 제어 기능 강화</strong>
            <ul>
                <li>Filter: 요청 전/후에 동작하는 Servlet 기반 인터셉터 구조 (보안, 로깅 등)</li>
                <li>Valve: Tomcat 엔진 내부에서 실행되는 필터(서버 수준에서 요청 처리 가능)</li>
                <li>Tomcat 10 이후 <code>RemoteCIDRValve</code>, <code>RequestLimitValve</code> 추가로
                    IP 접근 제어와 요청 수 제한 기능 향상</li>
                <li>보안 강화, Dos 공격 방어, 관리자 접근 통제 등에 활용 가능</li>
            </ul>
        </li>
    </ul>
</section>

<section>
    <h2>7. 설치 전 준비</h2>
    <ul>
        <li>JDK(Java Development Kit) 8 이상 설치</li>
        <li>JAVA_HOME 환경 변수 등록</li>
        <li>Tomcat 공식 사이트에서 버전 선택 및 다운로드
            <br><a href="https://tomcat.apache.org/" target="_blank">https://tomcat.apache.org/</a>
        </li>
    </ul>
</section>

<section>
    <h2>8. Windows 설치 절차</h2>
    <ol>
        <li>Tomcat ZIP 또는 EXE 파일 다운로드</li>
        <li>압축 해제 또는 설치 마법사 실행</li>
        <li>환경변수 JAVA_HOME 확인</li>
        <li>bin/startup.bat 실행</li>
        <li>브라우저에서 <code>http://localhost:8080</code> 접속 테스트</li>
    </ol>
</section>

<section>
    <h2>9. Linux(Ubuntu) 설치 절차</h2>
    <pre><code>
sudo apt update
sudo apt install default-jdk
cd /tmp
curl -O https://dlcdn.apache.org/tomcat/tomcat-10/v10.1.xx/bin/apache-tomcat-10.1.xx.tar.gz
sudo mkdir /opt/tomcat
sudo tar xzvf apache-tomcat-10.1.xx.tar.gz -C /opt/tomcat --strip-components=1
cd /opt/tomcat/bin
./startup.sh
  </code></pre>
    <p>브라우저에서 <code>http://서버IP:8080</code> 접속하여 정상 작동 확인</p>
</section>
<section>
    <h2>11. IntelliJ IDEA Ultimate에서 Tomcat 실행하기</h2>
    <ul>
        <li><strong>개요</strong>:
            <ul>
                <li>IntelliJ IDEA Ultimate은 내장된 서버 관리 기능으로 Tomcat을 직접 실행할 수 있음</li>
                <li>별도 명령어 없이 IDE 내부에서 배포, 실행, 디버깅 가능</li>
            </ul>
        </li>

        <li><strong>1단계: Tomcat 설치 경로 지정</strong>
            <ul>
                <li><a href="https://tomcat.apache.org/download-10.cgi">톰캣 10 다운로드</a> zip으로 다운 -> 압축해제  </li>
                <li>메뉴 → <code>서비스</code> → <code>+</code> → <code>실행 구성</code></li>
                <li><code>+</code> 버튼 클릭 → <code>그 외의 12 항목</code> 버튼 클릭 → <strong>Tomcat서버 → Local</strong> 선택</li>
                <li><code>어플리케이션 서버: 구성</code> 버튼 클릭 →다운받아서 압축푼 Tomcat 디렉터리 선택</li>
                <li>IDE가 자동으로 bin/startup.sh(.bat) 경로 인식</li>
            </ul>
        </li>
        <li><strong>맥OS(OSX) 에서 권한 설정 </strong>
            <ul>
                <li>터미널 열기</li>
                <li>톰캣의 소유자 권한 조정 :
                    <p><code> sudo chown -R $(whoami) [톰캣경로] (sudo chown -R $(whoami) /Users/som/Downloads/apache-tomcat-10.1.48)</code></p>
                    <p><code> 예:) sudo chown -R $(whoami) /Users/som/Downloads/apache-tomcat-10.1.48)</code></p>
                </li>
                <li>Tomcat의 모든 실행 스크립트(.sh)에 실행 권한을 부여 :
                    <p><code>cd [톰캣경로/bin]</code></p>
                    <p><code>chmod +x catalina.sh</code></p>
                </li>
            </ul>
        
        </li>
    </ul>
</section>
<section>
    <h2>12. IntelliJ IDEA에서 WebApp 프로젝트 생성하기</h2>
    <ul>
        <li><strong>개요</strong>:
            <ul>
                <li>IntelliJ IDEA Ultimate에서는 Tomcat 연동이 가능한 웹 애플리케이션 템플릿을 제공</li>
                <li>Servlet, JSP, HTML, CSS, JavaScript 등으로 구성된 표준 WebApp 프로젝트 생성 가능</li>
            </ul>
        </li>
    </ul>
</section>

<section>
    <h2>1단계: 새 프로젝트 생성</h2>
    <ul>
        <li>메뉴 → <strong>File → New → Project</strong> 선택</li>
        <li>왼쪽 목록에서 <strong>Jakarta EE</strong> 또는 <strong>Java Enterprise</strong> 선택</li>
        <li><strong>Application template</strong> 선택 후 <strong>Web Application</strong> 체크</li>
        <li>SDK(Java 버전) 선택: JDK 17 이상 권장</li>
        <li>빌드 도구: Maven 또는 Gradle 선택 가능 (수업에서는 Maven 추천)</li>
    </ul>
</section>

<section>
    <h2>2단계: Jakarta EE(Web) 옵션 설정</h2>
    <ul>
        <li><strong>Libraries</strong> → <code>Jakarta EE 9+</code> 선택 (Tomcat 10 이상용)</li>
        <li>Servlet/JSP를 함께 사용하려면 <code>Web Application</code> 템플릿 선택</li>
        <li>서버(Runtime) → <strong>Apache Tomcat</strong> 선택</li>
        <li>Tomcat 경로가 없으면 “Configure...” 클릭 후 설치 경로 지정</li>
    </ul>
</section>

<section>
    <h2>3단계: 프로젝트 구조 확인</h2>
    <pre><code>
MyWebApp/
 ├─ src/
 │   └─ main/
 │        ├─ java/           (Servlet 클래스)
 │        ├─ webapp/
 │        │    ├─ index.jsp
 │        │    └─ WEB-INF/
 │        │         └─ web.xml
 │        └─ resources/
 ├─ pom.xml                  (Maven 설정)
  </code></pre>
    <ul>
        <li><code>webapp</code>: JSP, HTML, CSS, JS 파일을 저장하는 폴더</li>
        <li><code>WEB-INF/web.xml</code>: 서블릿과 매핑 정보 관리</li>
        <li><code>java/</code>: 서블릿 클래스 및 비즈니스 로직 코드 작성</li>
    </ul>
</section>

<section>
    <h2>4단계: 간단한 JSP 페이지 작성</h2>
    <pre><code>&lt;%@ page contentType="text/html; charset=UTF-8" %&gt;
&lt;html&gt;
&lt;head&gt;&lt;title&gt;Hello JSP&lt;/title&gt;&lt;/head&gt;
&lt;body&gt;
  &lt;h2&gt;Hello, JSP! 톰캣 연동 성공 🎉&lt;/h2&gt;
  &lt;p&gt;현재 시간: &lt;%= new java.util.Date() %&gt;&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;
  </code></pre>
    <p>파일 위치: <code>src/main/webapp/index.jsp</code></p>
</section>

<section>
    <h2>5단계: 배포 설정</h2>
    <ul>
        <li>메뉴 → <strong>Run → Edit Configurations</strong></li>
        <li><strong>Tomcat Server → Local</strong> 추가</li>
        <li>Deployment 탭 → <strong>+ Artifact</strong> → <code>MyWebApp:war exploded</code> 선택</li>
        <li>Application context: <code>/</code> 또는 <code>/myweb</code> 설정</li>
    </ul>
</section>

<section>
    <h2>6단계: 실행 및 테스트</h2>
    <ul>
        <li>상단의 실행(▶️) 버튼 클릭 → Tomcat 시작</li>
        <li>브라우저가 자동으로 열리며 <code>http://localhost:8080/myweb</code> 접속</li>
        <li><strong>Hello JSP!</strong> 메시지가 보이면 성공</li>
        <li>JSP 수정 후 저장하면 IntelliJ가 자동으로 재배포 (Hot Deploy)</li>
    </ul>
</section>

<section>
    <h2>7단계: 서블릿 클래스 추가</h2>
    <pre><code>package com.example;

import jakarta.servlet.*;
import jakarta.servlet.http.*;
import java.io.*;

public class HelloServlet extends HttpServlet {
    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp)
            throws IOException {
        resp.setContentType("text/html;charset=UTF-8");
        PrintWriter out = resp.getWriter();
        out.println("&lt;h2&gt;Hello Servlet! 톰캣 실행 성공&lt;/h2&gt;");
    }
}
  </code></pre>
    <ul>
        <li>파일 위치: <code>src/main/java/com/example/HelloServlet.java</code></li>
        <li><code>WEB-INF/web.xml</code>에 서블릿 매핑 등록</li>
    </ul>
</section>

<section>
    <h2>8단계: web.xml 매핑 설정</h2>
    <pre><code>&lt;web-app xmlns="https://jakarta.ee/xml/ns/jakartaee"
         version="5.0"&gt;
  &lt;servlet&gt;
    &lt;servlet-name&gt;hello&lt;/servlet-name&gt;
    &lt;servlet-class&gt;com.example.HelloServlet&lt;/servlet-class&gt;
  &lt;/servlet&gt;

  &lt;servlet-mapping&gt;
    &lt;servlet-name&gt;hello&lt;/servlet-name&gt;
    &lt;url-pattern&gt;/hello&lt;/url-pattern&gt;
  &lt;/servlet-mapping&gt;
&lt;/web-app&gt;
  </code></pre>
    <p>실행 후 <code>http://localhost:8080/myweb/hello</code> 접속 시 “Hello Servlet!” 출력</p>
</section>

</body>
</html>