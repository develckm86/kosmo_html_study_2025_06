<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Forward와 Redirect</title>
    <link rel="stylesheet" href="/src/css/study.css">

</head>
<body>

<h1>서블릿의 Forward와 Redirect</h1>

<section>
    <h2>1. Forward와 Redirect의 개념</h2>
    <ul>
        <li><strong>Forward (포워드)</strong>
            서버 내부에서 요청을 다른 자원(JSP, 다른 서블릿 등)으로 전달하는 방식
            클라이언트는 내부 이동 사실을 알 수 없음
        </li>
        <li><strong>Redirect (리다이렉트)</strong>
            서버가 클라이언트에게 <code>새로운 요청</code>을 하도록 응답을 보냄
            클라이언트가 다시 지정된 URL로 요청을 보냄 (2번째 요청 발생)
        </li>
    </ul>
</section>

<section>
    <h2>2. 동작 원리</h2>
    <h3>Forward</h3>
    <ul>
        <li>톰캣 내부에서 요청 객체(<code>HttpServletRequest</code>)와 응답 객체(<code>HttpServletResponse</code>)를 그대로 유지한 채 다음 자원으로 전달</li>
        <li>주소창(URL)은 변경되지 않음</li>
        <li>데이터를 <code>request.setAttribute()</code>로 공유할 수 있음</li>
        <li>서버 내부 이동이므로 성능상 빠름</li>
    </ul>

    <h3>Redirect</h3>
    <ul>
        <li>서버가 <code>response.sendRedirect()</code>로 클라이언트에게 새로운 URL로 요청하라고 응답</li>
        <li>클라이언트가 두 번째 요청을 보냄</li>
        <li>주소창(URL)이 변경됨</li>
        <li>요청이 새로 만들어지므로 <code>request</code>의 데이터는 전달되지 않음</li>
        <li>대신 <code>session</code>이나 <code>URL 파라미터</code>를 통해 데이터 전달 가능</li>
    </ul>
</section>

<section>
    <h2>3. 사용 시점</h2>
    <ul>
        <li><strong>Forward 사용 시점</strong>
            <ul>
                <li>같은 요청 안에서 JSP 또는 다른 서블릿으로 제어를 넘길 때</li>
                <li>요청 객체를 유지해야 할 때 (ex. 데이터 전달)</li>
                <li>화면 렌더링 전에 서버 내부 처리만 수행할 때</li>
                <li>예: 로그인 성공 후 내부 JSP 페이지로 이동</li>
            </ul>
        </li>
        <li><strong>Redirect 사용 시점</strong>
            <ul>
                <li>요청을 완전히 새로 시작해야 할 때</li>
                <li>데이터베이스 수정, 등록 등의 작업 후 “새로고침 시 중복 실행”을 방지하고 싶을 때</li>
                <li>다른 도메인 또는 외부 URL로 이동할 때</li>
                <li>예: 회원가입 완료 후 로그인 페이지로 이동</li>
            </ul>
        </li>
    </ul>
</section>

<section>
    <h2>4. Forward 사용 예시</h2>
    <pre><code>// ControllerServlet.java
@WebServlet("/controller")
public class ControllerServlet extends HttpServlet {
    @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        String name = request.getParameter("name");
        request.setAttribute("userName", name);

        // JSP로 포워드 (요청 유지)
        RequestDispatcher dispatcher = request.getRequestDispatcher("/WEB-INF/result.jsp");
        dispatcher.forward(request, response);
    }
}

// result.jsp
&lt;h2&gt;안녕하세요, &lt;%= request.getAttribute("userName") %&gt; 님&lt;/h2&gt;
</code></pre>
    <ul>
        <li>요청이 서버 내부에서 이동하며, 클라이언트는 URL 변경을 인식하지 못함</li>
        <li><code>request</code> 속성으로 데이터 공유 가능</li>
    </ul>
</section>

<section>
    <h2>5. Redirect 사용 예시</h2>
    <pre><code>// RegisterServlet.java
@WebServlet("/register")
public class RegisterServlet extends HttpServlet {
    @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response)
            throws IOException {
        // 회원 등록 처리 로직 수행
        // ...

        // 완료 후 로그인 페이지로 리다이렉트
        response.sendRedirect("/login");
    }
}
</code></pre>
    <ul>
        <li>서버가 클라이언트에게 “/login” 주소로 다시 요청하라는 명령을 내려, 클라이언트가 새 요청을 보냄</li>
        <li>주소창이 /register → /login 으로 변경됨</li>
        <li>새로운 요청이므로 <code>request</code> 속성은 유지되지 않음</li>
    </ul>
</section>

<section>
    <h2>6. 차이점 요약</h2>
    <ul>
        <li><strong>Forward</strong>
            내부 이동 (서버 내부 처리), URL 변하지 않음, request 데이터 유지, 빠름
        </li>
        <li><strong>Redirect</strong>
            외부 이동 (클라이언트 재요청), URL 변경, request 초기화, session 또는 파라미터 사용
        </li>
    </ul>
</section>

<section>
    <h2>7. 실제 사용 패턴</h2>
    <ul>
        <li>입력폼 → 서블릿(처리) → 리다이렉트 → 결과 페이지</li>
        <li>서블릿 → JSP(View)로 데이터 전달 시에는 포워드</li>
        <li>등록/수정/삭제 후 새 요청으로 이동할 때는 리다이렉트</li>
    </ul>
</section>

</body>
</html>