<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>테이블 생성 및 수정 DDL</title>
    <link rel="stylesheet" href="/src/css/study.css">
</head>
<body>
    <h1>테이블 생성 및 수정 DDL</h1>
    <section>
        <h2>테이블 생성 (CREATE TABLE)</h2>
        <ul>
            <li>테이블은 데이터를 저장하는 기본 단위 (행/열 구조)</li>
            <li>컬럼마다 데이터 타입과 제약조건을 지정할 수 있음</li>
            <li>자주 쓰는 데이터 타입
                <ul>
                    <li>CHAR(n): 고정 길이 문자열 (예: 'A  ')</li>
                    <li>VARCHAR2(n): 가변 길이 문자열 (예: '서울')</li>
                    <li>NUMBER(p,s): 숫자 (예: 123.45)</li>
                    <li>DATE: 날짜와 시간 (예: 2025-09-21)</li>
                    <li>CLOB: 대용량 텍스트</li>
                    <li>BLOB: 대용량 바이너리 데이터</li>
                </ul>
            </li>
            <li>기본값 지정: <code>DEFAULT</code> 키워드로 값이 없을 때 자동 입력
                <pre><code>CREATE TABLE member (
  id NUMBER PRIMARY KEY,
  name VARCHAR2(50) NOT NULL,
  grade VARCHAR2(10) DEFAULT '일반',
  reg_date DATE DEFAULT SYSDATE
);</code></pre>
            </li>
        </ul>
    </section>

    <section>
        <h2>제약조건 (Constraint)</h2>
        <ul>
            <li>데이터 무결성을 보장하기 위한 규칙</li>
            <li>종류
                <ul>
                    <li>PRIMARY KEY: 유일, NULL 불가</li>
                    <li>UNIQUE: 중복 불가, NULL 허용</li>
                    <li>NOT NULL: 반드시 값 입력</li>
                    <li>CHECK: 조건 만족해야 함</li>
                    <li>FOREIGN KEY: 다른 테이블 키 참조</li>
                </ul>
            </li>
            <li>예시
                <pre><code>CREATE TABLE orders (
  order_id NUMBER PRIMARY KEY,
  member_id NUMBER NOT NULL,
  amount NUMBER CHECK(amount > 0),
  FOREIGN KEY (member_id) REFERENCES member(id)
);</code></pre>
            </li>
        </ul>
    </section>

    <section>
        <h2>시퀀스 (CREATE SEQUENCE)</h2>
        <ul>
            <li>자동 번호 생성을 위한 객체 (MySQL의 AUTO_INCREMENT 대체)</li>
            <li>문법
                <pre><code>CREATE SEQUENCE seq_member
START WITH 1
INCREMENT BY 1
NOCACHE
NOCYCLE;</code></pre>
            </li>
            <li>사용 예시
                <pre><code>INSERT INTO member (id, name)
VALUES (seq_member.NEXTVAL, '홍길동');

SELECT seq_member.CURRVAL FROM dual;</code></pre>
            </li>
        </ul>
    </section>

    <section>
        <h2>테이블 수정 (ALTER TABLE)</h2>
        <ul>
            <li>컬럼 추가: <code>ALTER TABLE member ADD phone VARCHAR2(20);</code></li>
            <li>컬럼 삭제: <code>ALTER TABLE member DROP COLUMN phone;</code></li>
            <li>컬럼 수정: <code>ALTER TABLE member MODIFY name VARCHAR2(100);</code></li>
            <li>제약조건 추가: <code>ALTER TABLE member ADD CONSTRAINT uq_email UNIQUE(email);</code></li>
            <li>제약조건 삭제: <code>ALTER TABLE member DROP CONSTRAINT uq_email;</code></li>
        </ul>
    </section>

    <section>
        <h2>테이블 삭제</h2>
        <ul>
            <li><strong>DROP TABLE</strong>: 구조 + 데이터 완전 삭제</li>
            <li><strong>TRUNCATE TABLE</strong>: 데이터만 삭제, 롤백 불가</li>
            <li><strong>DELETE</strong>: 조건 지정 가능, 롤백 가능</li>
            <li>예시
                <pre><code>DROP TABLE member;
TRUNCATE TABLE member;
DELETE FROM member WHERE id = 1;</code></pre>
            </li>
        </ul>
    </section>

    <section>
        <h3>오라클의 모든 데이터 타입</h3>
        <ol>
            <li>
                <strong>문자형 (Character Types)</strong>
                <ul>
                    <li>CHAR(n): 고정 길이 문자열 (1~2000바이트, 부족한 길이는 공백으로 채움)<br>
                        예: <code>CHAR(5)</code> → 'A    '</li>
                    <li>VARCHAR2(n): 가변 길이 문자열 (1~4000바이트, EXTENDED 모드 시 32767까지)<br>
                        예: <code>VARCHAR2(20)</code> → 'Seoul'</li>
                    <li>NCHAR(n): 고정 길이 유니코드 문자열 (1~2000자)</li>
                    <li>NVARCHAR2(n): 가변 길이 유니코드 문자열 (1~4000자, EXTENDED 모드 시 32767까지)</li>
                    <li>CLOB: 대용량 텍스트 (최대 4GB), 기사/문서 저장</li>
                </ul>
            </li>
            <li>
                <strong>숫자형 (Numeric Types)</strong>
                <ul>
                    <li>NUMBER(p,s): 정수/실수 저장 (최대 38자리)로 bigint 처럼 길이가 있는 10진수 데이터<br>
                        p=전체 자리수, s=소수 자리수<br>
                        예: <code>NUMBER(5,2)</code> → 999.99</li>
                    <li>BINARY_FLOAT: 단정도 부동소수점, 근사치를 저장하고 연산속도가 빠름 (32비트, 약 7자리 정밀도)</li>
                    <li>BINARY_DOUBLE: 배정도 부동소수점 (64비트, 약 16자리 정밀도)</li>
                </ul>
            </li>
            <li>
                <strong>날짜/시간형 (Date & Time Types) : 내부적으로 년/월/일/시/분/초를 각각 정수로 나눠 저장하는 구조로 BC 4712년 ~ AD 9999년 까지 저장가능(UNIX처럼 누적초가 아님,)</strong>
                <ul>
                    <li>DATE: 날짜와 시간 (초 단위까지, 내부는 숫자 구조)<br>
                        예: '2025-09-23 10:30:00'</li>
                    <li>TIMESTAMP: 날짜와 시간 (나노초 단위 정밀도)<br>
                        예: '2025-09-23 10:30:00.123456789'</li>
                    <li>TIMESTAMP WITH TIME ZONE: 시간대 정보 포함</li>
                    <li>TIMESTAMP WITH LOCAL TIME ZONE: 세션 로컬 시간대 변환</li>
                    <li>INTERVAL YEAR TO MONTH: 연/월 단위 기간<br>
                        예: <code>INTERVAL '2-6' YEAR TO MONTH</code> (2년 6개월)</li>
                    <li>INTERVAL DAY TO SECOND: 일/시/분/초 단위 기간<br>
                        예: <code>INTERVAL '7 12:30:45' DAY TO SECOND</code> (7일 12시간 30분 45초)</li>
                </ul>
            </li>
            <li>
                <strong>이진형 (Binary Types)</strong>
                <ul>
                    <li>RAW(n): 고정 길이 이진 데이터 (1~2000바이트)</li>
                    <li>LONG RAW: 최대 2GB 이진 데이터 (구버전, 현재는 BLOB 권장)</li>
                    <li>BLOB: 대용량 이진 데이터 (최대 4GB), 이미지/동영상/파일 저장</li>
                </ul>
            </li>
            <li>
                <strong>특수 타입 (Special Types)</strong>
                <ul>
                    <li>ROWID: 테이블의 행을 식별하는 고유 주소</li>
                    <li>UROWID: 범용 ROWID, 인덱스 조직 테이블 등도 지원</li>
                </ul>
            </li>
            <li>
                <strong>날짜 저장 구조 & UNIX TIME 변환</strong>
                <ul>
                    <li>DATE/TIMESTAMP는 내부적으로 숫자 구조로 저장됨 (문자열 아님)</li>
                    <li>UNIX TIME은 1970-01-01 00:00:00 UTC부터의 초(정수)</li>
                    <li>변환 예시:
                        <pre><code>-- 현재 시간을 UNIX TIME(초)로
SELECT (CAST(SYSTIMESTAMP AS DATE) - DATE '1970-01-01')*(60*60*24*1000) AS unix_time
FROM dual;

--1758612485852 UNIX TIME(정수)을 DATE로
SELECT TO_DATE('1970-01-01','YYYY-MM-DD') + (1758612485852/86400000) AS result_date
FROM dual;  -- 2025-09-23 07:28:06
</code></pre>
                    </li>
                </ul>
            </li>
        </ol>
    </section>
</body>
</html>